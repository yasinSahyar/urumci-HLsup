import"./payment-e27a1750.js";import"./main-2d10ea07.js";const a="/api";async function d(e,n){if(!n){console.error(`Invalid ID for ${e}`),alert(`Cannot delete ${e}: invalid ID`);return}try{const t=await fetch(`${a}/${e}/${n}`,{method:"DELETE"});if(t.ok)alert(`${e} deleted successfully!`),e==="products"?await s():e==="feedback"?await i():e==="purchase"&&await f();else{const r=await t.json();console.error(`Failed to delete ${e}:`,r),alert(`Failed to delete ${e}: ${r.message||"Unknown error"}`)}}catch(t){console.error(`Error deleting ${e}:`,t),alert(`An error occurred while deleting ${e}`)}}async function s(){try{const e=await fetch(`${a}/products`);if(!e.ok)throw new Error("Failed to fetch products");const n=await e.json(),t=document.getElementById("product");if(t){if(t.innerHTML="",n.length===0){t.innerHTML="<p>No products found.</p>";return}n.forEach(r=>{const o=document.createElement("li");o.textContent=r.name;const c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",()=>d("products",r.id)),o.appendChild(c),t.appendChild(o)})}}catch(e){console.error("Error loading products:",e),alert("Failed to load products")}}async function i(){try{const e=await fetch(`${a}/feedback`);if(!e.ok)throw new Error("Failed to fetch feedback");const n=await e.json(),t=document.getElementById("feedback");if(t){if(t.innerHTML="",n.length===0){t.innerHTML="<p>No feedback found</p>";return}n.forEach(r=>{const o=document.createElement("li");o.textContent=r.message;const c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",()=>d("feedback",r.id)),o.appendChild(c),t.appendChild(o)})}}catch(e){console.error("Error fetching feedback:",e),alert("Failed to fetch feedback")}}async function f(){try{const e=await fetch(`${a}/purchase`);if(!e.ok)throw new Error("Failed to fetch payments");const n=await e.json(),t=document.getElementById("payment");if(t){if(t.innerHTML="",n.length===0){t.innerHTML='<tr><td colspan="5">No payments found</td></tr>';return}n.forEach(r=>{const o=document.createElement("tr");o.innerHTML=`
          <td>${r.cardName||"N/A"}</td>
          <td>${r.email||"N/A"}</td>
          <td>â‚¬${r.total||"0.00"}</td>
          <td>${r.createdAt||"Unknown"}</td>
        `;const c=document.createElement("button");c.textContent="Delete",c.addEventListener("click",()=>d("purchase",r.id));const l=document.createElement("td");l.appendChild(c),o.appendChild(l),t.appendChild(o)})}}catch(e){console.error("Error fetching payments:",e),alert("Failed to fetch payments")}}document.addEventListener("DOMContentLoaded",()=>{s(),i(),f()});
